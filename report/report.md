---
## Front matter
title: "–ö—É—Ä—Å–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞"
##subtitle: "–ü—Ä–æ—Å—Ç–µ–π—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç"
author: "–¢–∞–≥–∏–µ–≤ –ë–∞–π—Ä–∞–º –ê–ª—Ç–∞–π –æ–≥–ª—ã"

## Generic otions
lang: ru-RU
toc-title: "–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: DejaVu Serif
romanfont: DejaVu Serif
sansfont: DejaVu Sans
monofont: DejaVu Sans Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Pandoc-crossref LaTeX customization
figureTitle: "–†–∏—Å."
tableTitle: "–¢–∞–±–ª–∏—Ü–∞"
listingTitle: "–õ–∏—Å—Ç–∏–Ω–≥"
lofTitle: "–°–ø–∏—Å–æ–∫ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π"
lotTitle: "–°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü"
lolTitle: "–õ–∏—Å—Ç–∏–Ω–≥–∏"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
  - \usepackage{caption}
  - \captionsetup[figure]{
      name=,
      labelsep=none,
      labelformat=empty
    }
---

# –°–µ—Ç–µ–≤–æ–π —Å–∏–º—É–ª—è—Ç–æ—Ä - ns-2

## –ß—Ç–æ —Ç–∞–∫–æ–µ NS-2 –∏ –¥–ª—è —á–µ–≥–æ –æ–Ω –Ω—É–∂–µ–Ω?

NS-2 (Network simulator 2) - —ç—Ç–æ —Å–∏–º—É–ª—è—Ç–æ—Ä –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å–µ—Ç–µ–π. NS-2 –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ TCP, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ –º–Ω–æ–≥–æ–∞–¥—Ä–µ—Å–Ω–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ –ø–æ –ø—Ä–æ–≤–æ–¥–Ω—ã–º –∏ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã–º (–ª–æ–∫–∞–ª—å–Ω—ã–º –∏ —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–º) —Å–µ—Ç—è–º.

NS - —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –≤—ã–±–æ—Ä —Å–∏–º—É–ª—è—Ç–æ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ç–∞—Ç—å—è—Ö, –ø–æ—è–≤–ª—è—é—â–∏—Ö—Å—è –Ω–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ `Sigcomm`. ns –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–≤–æ–µ–π –±–æ–ª—å—à–æ–π –±–∞–∑–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –Ω–µ–±–æ–ª—å—à–æ–π –≥—Ä—É–ø–ø–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤ ISI.

–°–∞–º –ø–æ —Å–µ–±–µ NS-2 –ø—Ä–æ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Å–∏–º—É–ª—è—Ü–∏–∏, –Ω–æ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏ –Ω–∞–º –Ω—É–∂–Ω–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞. –î–ª—è —ç—Ç–æ–≥–æ –±—ã–ª —Å–æ–∑–¥–∞–Ω NAM - Network Animator. NS –≤–º–µ—Å—Ç–µ —Å–æ —Å–≤–æ–∏–º –∫–æ–º–ø–∞–Ω—å–æ–Ω–æ–º, nam, –æ–±—Ä–∞–∑—É—é—Ç –æ—á–µ–Ω—å –º–æ—â–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è–º —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è. NS —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã IP. –° –ø–æ–º–æ—â—å—é NAM —ç—Ç–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –º–æ–∂–Ω–æ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤ –≤–∏–¥–µ –∞–Ω–∏–º–∞—Ü–∏–∏. 

## –ß—Ç–æ –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —ç—Ç–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤?

–°–æ–∑–¥–∞–≤–∞—Ç—å:

1. –ù–∞–∑–µ–º–Ω—ã–µ, —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–µ –∏ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã–µ —Å–µ—Ç–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (DV, LS, PIM-DM, PIM-SM, AODV, DSR).

2. –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ Web, ftp, telnet, cbr, —Å–ª—É—á–∞–π–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫.

3. –°–±–æ–∏, –≤–∫–ª—é—á–∞—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏, —Å–±–æ–π —Å–≤—è–∑–∏ –∏ —Ç.–¥.

4. –†–∞–∑–ª–∏—á–Ω—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –æ—á–µ—Ä–µ–¥–µ–π (drop-tail, RED, FQ, SFQ, DRR –∏ —Ç.–¥.) –∏ QoS (–Ω–∞–ø—Ä–∏–º–µ—Ä, IntServ –∏ Diffserv).

–í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å:

1. –ü–æ—Ç–æ–∫ –ø–∞–∫–µ—Ç–æ–≤, –Ω–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ –∏ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤.

2. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞: –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ TCP, —Å–∞–º–æ—Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏, –±—ã—Å—Ç—Ä–∞—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ.

3. –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —É–∑–ª–æ–≤ –≤ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã—Ö —Å–µ—Ç—è—Ö.

4. –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –æ—Å–≤–µ—â–µ–Ω–∏—è –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π.

5. –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, TCP cwnd).

# –ê–Ω–∞–ª–æ–≥–∏

–°–∞–º—ã–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∞–Ω–∞–ª–æ–≥–∏ NS-2:

 - NS-3

 - Cisco Packet Tracer
 
 - MIMIC Simulator

## MIMIC Simulator

MIMIC Simulator - —ç—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–æ–≤ Gambit Communications, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –æ–±–ª–∞—Å—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç—è–º–∏ –∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.

–ü–∞–∫–µ—Ç MIMIC Simulator Suite —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∏–º–∏—Ç–∞—Ü–∏–µ–π —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö —Å–µ—Ç–µ–π –∏ —Ü–µ–Ω—Ç—Ä–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ü–µ–ª—è—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –æ–±—É—á–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, –ø—Ä–æ–¥–∞–∂ –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç—è–º–∏.

MIMIC SNMP —Ä–µ—à–∞–µ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è: –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç—å—é –∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –æ–±—ã—á–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç –±–æ–ª—å—à–∏–º–∏ —Å–µ—Ç—è–º–∏. –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–∫–∏—Ö —Å–µ—Ç–µ–π –¥–ª—è –≤—ã—à–µ—É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞–ª–æ—Å—å –æ—Ç–¥–µ–ª—å–Ω–æ –∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è—Ö. –ß—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å –∑–∞—Ç—Ä–∞—Ç—ã, –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å —Å–µ—Ç–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∞

## Packet Tracer

Packet Tracer - —ç—Ç–æ –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π Cisco Systems, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ —Ç–æ–ø–æ–ª–æ–≥–∏–∏ –∏ –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ —Å–µ—Ç–∏. –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–æ–≤ –∏ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–æ–≤ Cisco, –∏—Å–ø–æ–ª—å–∑—É—è –∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. Packet Tracer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –∏–º–∏—Ç–∏—Ä—É–µ–º—ã–µ —Å–µ—Ç–µ–≤—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ —Å–≤–æ–µ–º—É —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é.

Packet Tracer –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ —Ç–æ–ø–æ–ª–æ–≥–∏–∏ –ø—É—Ç–µ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–æ–≤, –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–æ–≤ –∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ —Å–µ—Ç–µ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –§–∏–∑–∏—á–µ—Å–∫–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–º "–∫–∞–±–µ–ª—å". Packet Tracer –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–º–∏—Ç–∏—Ä—É–µ–º—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è, –∞ —Ç–∞–∫–∂–µ –±–∞–∑–æ–≤—É—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é —Å –ø–æ–º–æ—â—å—é RIP, OSPF, EIGRP, BGP.

## NS-3

NS-3 —è–≤–ª—è–µ—Ç—Å—è –ø—Ä—è–º—ã–º –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–º NS-2. NS-3 –ø–æ—Å—Ç—Ä–æ–µ–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º C++ –∏ Python —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ NS –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ Python –±–ª–∞–≥–æ–¥–∞—Ä—è –±–∏–±–ª–∏–æ—Ç–µ–∫–µ pybindgen, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ NS C++ –≤ castxml –∏ pygccxml –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —Å–≤—è–∑—É—é—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ C++. –≠—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã C++ –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –≤ –º–æ–¥—É–ª—å NS Python, —á—Ç–æ–±—ã –ø–æ–∑–≤–æ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –º–æ–¥–µ–ª—è–º–∏ C++ NS –∏ —è–¥—Ä–æ–º —Å –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–æ–≤ Python. –°–∏–º—É–ª—è—Ç–æ—Ä NS –æ—Å–Ω–∞—â–µ–Ω –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞.

# RED

## –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ

RED (@red) (Random Early Detection - –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —Ä–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ) -- –ê–ª–≥–æ—Ä–∏—Ç–º –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥—å—é –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ–º –æ—á–µ—Ä–µ–¥–µ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–æ–≤, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫.

–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å $p_{b}$ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ñ—É–Ω–∫—Ü–∏—é, –ª–∏–Ω–µ–π–Ω–æ –∑–∞–≤–∏—Å—è—â—É—é –æ—Ç $\hat{q}$, –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ $q_{min}$ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ $q_{max}$ –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ $p_{max}$, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–µ–≥–æ —á–∞—Å—Ç—å –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Å—Ä–µ–¥–Ω–∏–º —Ä–∞–∑–º–µ—Ä–æ–º –æ—á–µ—Ä–µ–¥–∏ –∑–Ω–∞—á–µ–Ω–∏—è $q_{max}$ –∏ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

$$
p_{b} = \left\{ \begin{array}{cl}
0, &  \  0 < \hat{q} \leq q_{min} \\
1, &  \ \hat{q} > q_{max} \\
\frac{\hat{q} - q_{min}}{q_{max} - q_{min}} p_{max}, & \ q_{min} < \hat{q} \leqslant q_{max} \\
\end{array} \right.
$$

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å DropTail

DropTail –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –ø–∞—Å—Å–∏–≤–Ω–æ–º—É —Ç–∏–ø—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥—å—é (PQM). –û–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–∞–∫–µ—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –±—É—Ñ–µ—Ä –Ω–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è, –∏ –∫–æ–≥–¥–∞ –±—É—Ñ–µ—Ä –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è, —Ç.–µ. –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞, –æ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç –æ—Ç–±—Ä–∞—Å—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç. –°—É—â–µ—Å—Ç–≤—É—é—Ç –¥–≤–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –≤—ã–ø–∞–¥–µ–Ω–∏—è, —Ç.–µ. 0 –∏–ª–∏ 1. –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–∞ —Ä–∞–≤–Ω–∞ 0, –µ—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç—É–ø–∏–≤—à–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ –º–µ–Ω—å—à–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤, –∏ –≤ –æ–±—Ä–∞—Ç–Ω–æ–º —Å–ª—É—á–∞–µ –æ–Ω–∞ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–∞ 1.

–û—Å–Ω–æ–≤–Ω—ã–º –æ—Ç–ª–∏—á–∏–µ–º –º–µ–∂–¥—É RED –∏ DropTail —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ RED –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–∞—Ñ–∏–∫–æ–º, —Ç–æ–≥–¥–∞ –∫–∞–∫ Droptail –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. (@redcomparison)

## –†–∞–∑–±–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã RED

–ü–∞–∫–µ—Ç –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –≤ —Å–∏—Å—Ç–µ–º—É –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –º–æ–¥—É–ª—å —Å–±—Ä–æ—Å–∞. –†–µ—à–µ–Ω–∏–µ –æ —Å–±—Ä–æ—Å–µ –ø–∞–∫–µ—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ $p$, –ø–æ–ª—É—á–∞–µ–º–æ–≥–æ –æ—Ç —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ –º–æ–¥—É–ª—è. –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å $p$ —Å–±—Ä–æ—Å–∞ –ø–∞–∫–µ—Ç–æ–≤ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –≤–∑–≤–µ—à–µ–Ω–Ω–æ–≥–æ —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ $\hat{q}$, —Ç–∞–∫–∂–µ –≤—ã—á–∏—Å–ª—è–µ–º–æ–≥–æ —É–ø—Ä–∞–≤–ª—è—é—â–∏–º –º–æ–¥—É–ª–µ–º, –æ—Å–Ω–æ–≤—ã- –≤–∞—è—Å—å –Ω–∞ —Ç–µ–∫—É—â–µ–º –∑–Ω–∞—á–µ–Ω–∏–∏ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ $q$.

![–ú–æ–¥—É–ª—å RED](./image/001.png){#fig:001 width=50%}

–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

![RED](./image/002.png){#fig:002 width=40%}

## –†–∞–∑–±–æ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ NS2

–§–∞–π–ª—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å RED –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–æ –ø—É—Ç–∏ `ns-2.35/queue`, —Ç–∞–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—á–µ—Ä–µ–¥–µ–π (—Å—Ä–µ–¥–∏ –Ω–∏—Ö DropTail, RED –∏ —Ç.–¥.). –î–ª—è –Ω–∞—Å –≤–∞–∂–Ω—ã –¥–≤–∞ —Ñ–∞–π–ª–∞:

 - `red.h` -- –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª
 - `red.cc` -- –ò—Å—Ö–æ–¥–Ω–∏–∫–∏

–í —Ñ–∞–π–ª–µ red.cc –¥–ª—è –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `REDQueue::estimator` –∏ —Ñ—É–Ω–∫—Ü–∏—è `double REDQueue::calculate_p_new`. –ü–µ—Ä–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–∞—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏. –í—Ç–æ—Ä–∞—è -- —Ä–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–∞.

–†–∞–∑–±–µ—Ä–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –≤—Ç–æ—Ä–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:

```cpp
double 
REDQueue::calculate_p_new(double v_ave, double th_max, int gentle, double v_a, 
	double v_b, double v_c, double v_d, double max_p)
{
	double p;
	if (gentle && v_ave >= th_max) {
		// –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è GRED (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ GRED –Ω–∏–∂–µ)

		// p –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–æ–º–µ–∂—É—Ç–∫–µ –æ—Ç max_p –¥–æ 1,
		// —Ç–æ–≥–¥–∞ –∫–∞–∫ —Å—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –≤ –ø—Ä–æ–º–µ–∂—É—Ç–∫–µ
		// q_max –∏ 2*q_max
		p = v_c * v_ave + v_d;
        } else if (!gentle && v_ave >= th_max) { 
		// –ü—Ä–µ–≤—ã—Å–∏–ª–∏ –ø–æ—Ä–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º RED
		// p –ø—Ä–∏—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∫ 1
                p = 1.0;
        } else {
		// p –≤ –ø—Ä–æ–º–µ–∂—É—Ç–∫–µ –æ—Ç 0 –¥–æ max_p, —Ç–æ–≥–¥–∞ –∫–∞–∫
		// —Å—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –≤ –ø—Ä–æ–º–µ–∂—É—Ç–∫–µ
		// th_min –¥–æ th_max
                p = v_a * v_ave + v_b;
                // p = (v_ave - th_min) / (th_max - th_min)

                p *= max_p; 
        }
	if (p > 1.0)
		p = 1.0;
	return p;
}
```

## –ü—Ä–æ–±–ª–µ–º—ã RED

–û–¥–Ω–∞ –∏–∑ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º RED –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ –¥–ª–∏–Ω—É –æ—á–µ—Ä–µ–¥–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏. –•–æ—Ç—è –Ω–∞–ª–∏—á–∏–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É, –µ–µ –¥–ª–∏–Ω–∞ –¥–∞–µ—Ç –æ—á–µ–Ω—å –º–∞–ª–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏.

–ü–æ—Å–∫–æ–ª—å–∫—É –∞–ª–≥–æ—Ä–∏—Ç–º RED –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏, –µ–º—É –ø—Ä–∏—Å—É—â–∞ –ø—Ä–æ–±–ª–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–µ–ø–µ–Ω–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ RED —Ç—Ä–µ–±—É–µ—Ç —à–∏—Ä–æ–∫–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏. –•–æ—Ç—è RED –º–æ–∂–µ—Ç –¥–æ—Å—Ç–∏—á—å –∏–¥–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—á–µ–π —Ç–æ—á–∫–∏, –æ–Ω –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –æ–±—ä–µ–º–∞ –±—É—Ñ–µ—Ä–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

# WRED 

## –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ

WRED (Weighted random early detection - –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —Ä–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ) -- –ê–ª–≥–æ—Ä–∏—Ç–º –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥—å—é, —è–≤–ª—è–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º RED.

–í–∑–≤–µ—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ —Ä–∞–Ω–Ω–µ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∏—Ö –æ—Ç–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–µ—Ö–∞–Ω–∏–∑–º–∞ RED –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Ç–∏–ø–∞ —Ç—Ä–∞—Ñ–∏–∫–∞.

![WRED](./image/003.png){#fig:003}

–ê–ª–≥–æ—Ä–∏—Ç–º WRED —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –µ–¥–∏–Ω–æ–π –æ—á–µ—Ä–µ–¥—å—é –ø–∞–∫–µ—Ç–æ–≤, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π, –∫–∞–∫ –∏ –≤ RED, –ø–æ —Ñ–æ—Ä–º—É–ª–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –≤–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –∑–∞–¥–∞—é—Ç—Å—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ø–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Å–±—Ä–æ—Å–∞) –∏ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–±—Ä–æ—Å–∞.

–ù–∞–ø—Ä–∏–º–µ—Ä, –æ—á–µ—Ä–µ–¥–∏ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–µ –ø–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –ø–∞–∫–µ—Ç–∞. –≠—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–Ω–∏—é –ø–∞–∫–µ—Ç–æ–≤ —Å –Ω–∏–∑–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º, –∞ —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –∫ –∑–∞—â–∏—Ç–µ –ø–∞–∫–µ—Ç–æ–≤ —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –≤ —Ç–æ–π –∂–µ –æ—á–µ—Ä–µ–¥–∏.

# GRED

## –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ

GRED (Gentle random early detection - –º—è–≥–∫–æ–µ/–∞–∫–∫—É—Ä–∞—Ç–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —Ä–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ) -- –ê–ª–≥–æ—Ä–∏—Ç–º –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥—å—é, —è–≤–ª—è–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º RED.

Gentle RED —Ä–∞—Å—à–∏—Ä—è–µ—Ç RED —Ç–µ–º, —á—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ä–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ä–∞–≤–Ω–æ $2*q_{max}$, —Ç–µ–º —Å–∞–º—ã–º "—Å–≥–ª–∞–∂–∏–≤–∞—è" –∫—Ä–∏–≤—É—é.

![GRED](./image/004.png){#fig:004}

–í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

$$
p_{b} = \left\{ \begin{array}{cl}
0, &  \  0 < \hat{q} \leq q_{min} \\
\frac{\hat{q} - q_{min}}{q_{max} - q_{min}} p_{max}, & \ q_{min} \leqslant \hat{q} < q_{max} \\
\frac{\hat{q} - q_{min}}{q_{max}}(1-p_{max}) - p_{max}, & \ q_{max} \leqslant \hat{q} < 2q_{max} \\
1, &  \ \hat{q} \geqslant  q_{max} \\
\end{array} \right.
$$


# NLRED

## –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ

RED –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞, —Ç–æ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤ –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ –æ–¥–Ω—É –æ—á–µ—Ä–µ–¥—å –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –≠—Ç–æ –ø–æ—Ä–æ–∂–¥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã, –≤—ã–∑–≤–∞–Ω–Ω—ã–µ –Ω–µ–≤–æ—Å–ø—Ä–∏–∏–º—á–∏–≤—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏. –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã –±—ã–ª –≤–Ω–µ–¥—Ä–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞–º–∏ –Ω–µ–ª–∏–Ω–µ–π–Ω–æ–≥–æ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ä–∞–Ω–Ω–µ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (NLRED (@NLRED)). –í NLRED –µ—Å—Ç—å –Ω–µ–ª–∏–Ω–µ–π–Ω–∞—è –∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –≥–¥–µ –≤ RED —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è –ª–∏–Ω–µ–π–Ω–∞.

–í–º–µ—Å—Ç–æ –ª–∏–Ω–µ–π–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏, –≤–æ–∑–º–æ–∂–Ω–æ, –±—ã–ª–æ –±—ã –ª—É—á—à–µ, –µ—Å–ª–∏ –±—ã –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É–≤–µ–ª–∏—á–∏–≤–∞–ª–∞—Å—å –º–µ–¥–ª–µ–Ω–Ω–æ, –∫–æ–≥–¥–∞ –æ–Ω–∞ –±–ª–∏–∑–∫–∞ –∫ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π, –∏ —Ä–µ–∑–∫–æ —É–≤–µ–ª–∏—á–∏–≤–∞–ª–∞—Å—å, –∫–æ–≥–¥–∞ –æ–Ω–∞ –±–ª–∏–∑–∫–∞ –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π. –ï—Å–ª–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ª–∏–Ω–µ–π–Ω–æ –º–µ–∂–¥—É –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –ø–æ—Ä–æ–≥–æ–º –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –ø–æ—Ä–æ–≥–æ–º, —Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ç–æ–≥–æ, —á—Ç–æ –≤—Ö–æ–¥—è—â–∏–π –ø–∞–∫–µ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–±—Ä–æ—à–µ–Ω, –¥–∞–∂–µ –µ—Å–ª–∏ —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ –Ω–µ–≤–µ–ª–∏–∫–∞. 


# Adaptive RED

## –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ

–í –∞–ª–≥–æ—Ä–∏—Ç–º–µ Adaptive RED (ARED), —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–º –§–µ–Ω–≥–æ–º [@ARED_1;@ARED_2] –∏ —É—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–Ω–∞—è –§–ª–æ–π–¥–æ–º [@ARED_3], —Ñ—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É AIMD (–ü—Ä–∏–Ω—Ü–∏–ø AIMD –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π –≤–µ–ª–∏—á–∏–Ω—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø—É—Ç—ë–º —Å–ª–æ–∂–µ–Ω–∏—è —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º, —É —É–º–µ–Ω—å—à–µ–Ω–∏–µ ‚Äî –ø—É—Ç—ë–º —É–º–Ω–æ–∂–µ–Ω–∏—è –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä.)

–ê–ª–≥–æ—Ä–∏—Ç–º ARED —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ interval (–ø–∞—Ä–∞–º–µ—Ç—Ä) –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –µ—Å–ª–∏ $\hat{q}$ –±–æ–ª—å—à–µ —Ü–µ–ª–µ–≤–æ–π (–∂–µ–ª–∞–µ–º–æ–π) $\hat{q_t}$ –∏ $p_{max} \leqslant 0,5$, —Ç–æ $p_{max}$ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—É—é –≤–µ–ª–∏—á–∏–Ω—É $\alpha$; –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ $\hat{q}$ –º–µ–Ω—å—à–µ —Ü–µ–ª–µ–≤–æ–π $\hat{q_t}$ –∏ $p_{max}\geqslant0,01$, —Ç–æ $p_{max}$ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –≤ $\beta$ —Ä–∞–∑:

$$
p_{max} = \left\{ \begin{array}{c}
p_{max}+\alpha, \ \hat{q}>\hat{q_{t}}, \ p_{max} \leqslant0,5 \\
\beta * p_{max}, \ \hat{q}<\hat{q_{t}}, \ p_{max} \geqslant0,01 \\
\end{array} \right.
$$

–≥–¥–µ

$$
q_{min}+0,4(q_{max}-q_{min}) < \hat{q_t} < q_{min}+0,6(q_{max}-q_{min})
$$

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

 - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ (minth). –û–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–∞–Ω–∞–ª–∞ (C) –∏ –∑–∞–¥–µ—Ä–∂–∫–∏ —Ü–µ–ª–µ–≤–æ–π –æ—á–µ—Ä–µ–¥–∏.

 - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ (maxth). –û–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –º–µ—Å—è—Ü–∞.
 
 - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ wq. –û–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–∞–Ω–∞–ª–∞ (C).
 
 - –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ maxp. –û–Ω –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç–µ–∫—É—â–µ–π —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏.

# Refined Adaptive RED

–ê–ª–≥–æ—Ä–∏—Ç–º Refined ARED (RARED) —è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π ARED –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–æ–ª–µ–µ –∞–∫—Ç–∏–≤–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–±—Ä–æ—Å–∞ ùëùmax, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –∫ –∏–∑–º–µ–Ω—è—é—â–µ–π—Å—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –≤–∑–≤–µ—à–µ–Ω–Ω–æ–π —Å–∫–æ–ª—å–∑—è—â–µ–π —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω–µ –æ—á–µ—Ä–µ–¥–∏ $\hat{q}$:

$$
p_{b} = \left\{ \begin{array}{cl}
p_{max}+\alpha, \  \hat{q}>\hat{q_{t}}, \ p_{max} \leqslant0,5 \\
\beta p_{max}, \ \hat{q}\leqslant\hat{q_{t}}, \ p_{max} \geqslant0,5\\
\end{array} \right.
$$

–≥–¥–µ 


$$
q_{min}+0,48(q_{max}-q_{min}) < \hat{q_t} < q_{min}+0,52(q_{max}-q_{min})
$$
$$
\alpha=(0,25\frac{\hat{q}-\hat{q_t}}{\hat{q_t}})p_{max}, \ \beta=1-(0,17\frac{\hat{q}-\hat{q_t}}{\hat{q_t}-q_{min}})
$$

# RED –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ NS2

–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–µ–º –∫ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ RED –Ω–∞ NS2. –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –º—ã –±—É–¥–µ–º —Ä–∞–∑–¥–µ–ª—è—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ –º–æ–¥—É–ª–∏, –∞ –≤ —Å–∞–º–∏—Ö –º–æ–¥—É–ª—è—Ö–∏ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è. 

### main.tcl

–í –¥–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ –º—ã –∑–∞–¥–∞–µ–º —Å–∏–º—É–ª—è—Ç–æ—Ä, —Å–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª—ã —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤–Ω–µ—à–Ω–∏–µ –º–æ–¥—É–ª–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞. –í –∫–æ–Ω—Ü–µ –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ.

```tcl
set ns [new Simulator]

set nf [open out.nam w]
$ns namtrace-all $nf

source "nodes.tcl"
source "queue.tcl"
source "plotWindow.tcl"
source "modeling.tcl"
source "finish.tcl"

$ns run
```

### nodes.tcl

–°–ª–µ–¥—É—é—â–∏–π —Ñ–∞–π–ª –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É–∑–ª–æ–≤. –í –Ω–µ–º –º—ã –∑–∞–¥–∞–µ–º 2 –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞ –∏ 20 —É–∑–ª–æ–≤ –Ω–∞ –∫–∞–∂–¥–æ–º –∫–æ–Ω—Ü–µ, —Å–æ–µ–¥–∏–Ω—è–µ–º —É–∑–ª—ã –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ç–∏–ø –æ—á–µ—Ä–µ–¥–∏ –∏ —Ä–∞—Å—Å—Ç–∞–≤–ª—è–µ–º –∏—Ö –Ω–∞ –∞–Ω–∏–º–∞—Ü–∏–∏.

```tcl
set node_(r0) [$ns node]
set node_(r1) [$ns node]
$node_(r0) color "red"
$node_(r1) color "red"
$node_(r0) label "red"

set n 20

for {set i 0} {$i < $n} {incr i} {
        set node_(s$i) [$ns node]
        $node_(s$i) color "blue"
        $node_(s$i) label "ftp"
        $ns duplex-link $node_(s$i) $node_(r0) 100Mb 20ms DropTail

        set node_(s[expr $n + $i]) [$ns node]
        $ns duplex-link $node_(s[expr $n + $i]) $node_(r1) 100Mb 20ms DropTail
}

$ns simplex-link $node_(r0) $node_(r1) 20Mb 15ms RED
$ns simplex-link $node_(r1) $node_(r0) 15Mb 20ms DropTail

$ns queue-limit $node_(r0) $node_(r1) 300
$ns queue-limit $node_(r1) $node_(r0) 300


for {set t 0} {$t < $n} {incr t} {
        $ns color $t green
        set tcp($t) [$ns create-connection TCP/Reno $node_(s$t) TCPSink $node_(s[expr $n + $t]) $t]
        $tcp($t) set window_ 32
        $tcp($t) set maxcwnd_ 32
        $tcp($t) set packetsize_ 500
        set ftp($t) [$tcp($t) attach-source FTP]
}

$ns simplex-link-op $node_(r0) $node_(r1) orient right
$ns simplex-link-op $node_(r1) $node_(r0) orient left
$ns simplex-link-op $node_(r0) $node_(r1) queuePos 0
$ns simplex-link-op $node_(r1) $node_(r0) queuePos 0


for {set m 0} {$m < $n} {incr m} {
        $ns duplex-link-op $node_(s$m) $node_(r0) orient right
        $ns duplex-link-op $node_(s[expr $n + $m]) $node_(r1) orient left
}
```

### queue.tcl

–í –¥–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ –º—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –º–æ–Ω–∏—Ç–æ—Ä—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ RED. –ê –∏–º–µ–Ω–Ω–æ:

 - `qlim_` - –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≥—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏

 - `thresh_` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏ –≤ –ø–∞–∫–µ—Ç–∞—Ö;

 - `maxthresh_` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏ –≤ –ø–∞–∫–µ—Ç–∞—Ö;
 
 - `q_weight_` - –≤–µ—Å –æ—á–µ—Ä–µ–¥–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏
 
 - `linterm_` - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–∞

 - `drop-tail_` - –≤–º–µ—Å—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ randomdrop –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º drop-tail –≤ —Å–ª—É—á–∞–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ –∏–ª–∏ –∫–æ–≥–¥–∞ —Å—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç `maxthresh_`

```tcl
set windowvstime [open wvst w]
set qmon [$ns monitor-queue $node_(r0) $node_(r1) [open qm.out w]]
[$ns link $node_(r0) $node_(r1)] queue-sample-timeout

set redq [[$ns link $node_(r0) $node_(r1)] queue]
$redq set qlim_ 75 150
$redq set thresh_ 75
$redq set maxthresh_ 150
$redq set q_weight_ 0.002
$redq set linterm_ 10
$redq set drop-tail_ true

set tchan_ [open all.q w]
$redq trace curq_
$redq trace ave_
$redq attach $tchan_
```

### plotWindow.tcl

–í –¥–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ —Ä–∞–∑–º–µ—Ä–µ –æ–∫–Ω–∞ TCP.

```tcl
proc plotwindow {tcpsource file} {
   global ns
   set time 0.01
   set now [$ns now]
   set cwnd [$tcpsource set cwnd_]
   puts $file "$now $cwnd"
   $ns at [expr $now+$time] "plotwindow $tcpsource $file"
}
```

### modeling.tcl

–ó–¥–µ—Å—å –º—ã —Ö—Ä–∞–Ω–∏–º –Ω–∞—à–µ –º–æ–¥–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è, –∞ –∏–º–µ–Ω–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ–º `ftp` –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—É [`plotWindow`](#plotWindow.tcl)

```tcl
for {set r 0} {$r < $n} {incr r} {
        $ns at 0.0 "$ftp($r) start"
        $ns at 1.0 "plotwindow $tcp($r) $windowvstime"
        $ns at 20.0 "$ftp($r) stop"
}

$ns at 21.0 "finish"
```

### finish.tcl

–ê —ç—Ç–æ —É –Ω–∞—Å –∑–∞–≤–µ—Ä—à–∞—é—â–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤, –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç `xgraph` –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –¥–∏–Ω–∞–º–∏–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ TPC –∏ –≥—Ä–∞—Ñ–∏–∫ –¥–∏–Ω–∞–º–∏–∫–∏ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ –∏ —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏.

```tcl
proc finish {} {
   global ns nf
   $ns flush-trace
   close $nf
   global tchan_
   set awkCode {
      {
         if ($1 == "Q" && NF>2) {
            print $2, $3 >> "temp.q";
            set end $2
         }
         else if ($1 == "a" && NF>2)
         print $2, $3 >> "temp.a";
      }
   }

   set f [open temp.queue w]
   puts $f "TitleText: RED"
   puts $f "Device: Postscript"

   if { [info exists tchan_] } {
      close $tchan_
   }

   exec rm -f temp.q temp.a
   exec touch temp.a temp.q

   exec awk $awkCode all.q

   puts $f \"queue
   exec cat temp.q >@ $f
   puts $f \n\"ave_queue
   exec cat temp.a >@ $f
   close $f

   exec xgraph -bb -tk -x time -t "TCPRenoCWND" wvst &
   exec xgraph -bb -tk -x time -y queue temp.queue &
   exec nam out.nam &
   exit 0
}
```

### plot.sh

–ß—Ç–æ–±—ã –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞ GNUPlot (—Å–º. [@gnuplot_homepage;@wiki:Gnuplot]) –Ω–∞–ø–∏—à–µ–º —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–∞—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å –∏—Ö –≤ –≥—Ä–∞—Ñ–∏–∫–∏. –ó–¥–µ—Å—å –º—ã –∑–∞–¥–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ –æ—Å–∏ –∞–±—Å—Ü–∏—Å—Å –º—ã –∑–∞–¥–∞–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫. –ò –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Ç—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–∞:

 - –≥—Ä–∞—Ñ–∏–∫ –¥–∏–Ω–∞–º–∏–∫–∏ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏.

 - –≥—Ä–∞—Ñ–∏–∫ –¥–∏–Ω–∞–º–∏–∫–∏ —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏.

 - –≥—Ä–∞—Ñ–∏–∫ –¥–∏–Ω–∞–º–∏–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ TCP.

```tcl
!/usr/bin/gnuplot -persist
set xrange [0:20]

set terminal postscript eps
set output "queues.eps"
set xlabel "Time (s)"
set ylabel "Queue Length"
set title "RED Queue"
plot "temp.q" with lines linestyle 1 lt 1 lw 2 title "Queue length"

set terminal postscript eps
set output "ave_queues.eps"
set xlabel "Time (s)"
set ylabel "Queue Length"
set title "RED Queue"
plot "temp.a" with lines linestyle 2 lt 3 lw 2 title "Average queue length"

set terminal postscript eps
set output "TCP.eps"
set xlabel "Time (s)"
set ylabel "Window size"
set title "TCPVsWindow"
plot "wvst" with lines linestyle 1 lt 1 lw 2 title "WvsT"
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ `ns main.tcl`, –∞ —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ [`plot.sh`](#plot.sh) –º—ã –ø–æ–ª—É—á–∏–º –Ω–∞ –≤—ã—Ö–æ–¥–µ —Ç—Ä–∏ —Ñ–∞–π–ª–∞ —Ñ–æ—Ä–º–∞—Ç–∞ EPS (Encapsulated PostScript), –∫–æ—Ç–æ—Ä—ã–µ –º—ã –º–æ–∂–µ–º —Å–ø–æ–∫–æ–π–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å.

 - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ 
 
![&nbsp;](./files/queues.pdf){ width=70% margin=auto }

 - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏

![&nbsp;](./files/ave_queues.pdf){ width=70% margin=auto }
 
 - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞, —Ç–∞–∫ –∫–∞–∫ –º—ã –∑–∞–¥–∞–ª–∏ –ø–æ—Ç–æ–ª–æ–∫ –æ–∫–Ω–∞, —Ç–æ –æ–Ω –µ–≥–æ –Ω–µ –±—É–¥–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å.

![&nbsp;](./files/TCP.pdf){ width=70% margin=auto }

# –í–∞—Ä–∏–∞–Ω—Ç—ã RED –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ

## NLRED

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è NLRED –≤ ns2 –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è [–ø–∞—Ç—á–µ–º](http://mohittahiliani.blogspot.com/2012/01/nonlinear-red-nlred-patch-for-ns-2.html) –æ—Ç Mohit P. Tahiliani –¥–ª—è –≤–µ—Ä—Å–∏–∏ 2.34.

–ò–∑–º–µ–Ω–∏–º —Ñ–∞–π–ª [`queue.tcl`](#queue.tcl) –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å NLRED, –¥–æ–±–∞–≤–∏–≤ –≤ –Ω–µ–≥–æ —Å—Ç—Ä–æ—á–∫—É `$redq set nonlinear_ 1`. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –∑–∞–ø—É—Å—Ç–∏–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –º—ã –ø–æ–ª—É—á–∏–º –≥—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏.

 - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ 
 
![&nbsp;](./files/NLRED-queues.pdf){ width=70% margin=auto }

 - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏

![&nbsp;](./files/NLRED-ave_queues.pdf){ width=70% margin=auto }

## Adaptive RED

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è ARED –≤ ns2 –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è [–ø–∞—Ç—á–µ–º](http://mohittahiliani.blogspot.com/2012/01/refined-adaptive-red-re-ared-or-rared.html) –æ—Ç Mohit P. Tahiliani –¥–ª—è –≤–µ—Ä—Å–∏–∏ 2.34.

–ò–∑–º–µ–Ω–∏–º —Ñ–∞–π–ª [`queue.tcl`](#queue.tcl) –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å ARED, –¥–æ–±–∞–≤–∏–≤ –≤ –Ω–µ–≥–æ —Å—Ç—Ä–æ—á–∫—É 

```
$redq set adaptive_ 1
```

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –∑–∞–ø—É—Å—Ç–∏–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –º—ã –ø–æ–ª—É—á–∏–º –≥—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏.

 - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ 
 
![&nbsp;](./files/ARED-queues.pdf){ width=70% margin=auto }

 - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏

![&nbsp;](./files/ARED-ave_queues.pdf){ width=70% margin=auto }


## Refined Adaptive RED

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è RARED –≤ ns2 –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è [–ø–∞—Ç—á–µ–º](http://mohittahiliani.blogspot.com/2012/01/refined-adaptive-red-re-ared-or-rared.html) –æ—Ç Mohit P. Tahiliani –¥–ª—è –≤–µ—Ä—Å–∏–∏ 2.34.

–ò–∑–º–µ–Ω–∏–º —Ñ–∞–π–ª [`queue.tcl`](#queue.tcl) –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å RARED, –¥–æ–±–∞–≤–∏–≤ –≤ –Ω–µ–≥–æ —Å—Ç—Ä–æ—á–∫—É 

```
$redq set adaptive_ 1
$redq set refined_adaptive_ 1
```

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –∑–∞–ø—É—Å—Ç–∏–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –º—ã –ø–æ–ª—É—á–∏–º –≥—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏.

 - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ 
 
![&nbsp;](./files/REARED-queues.pdf){ width=70% margin=auto }

 - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏

![&nbsp;](./files/REARED-ave_queues.pdf){ width=70% margin=auto }

## –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ

–î–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –ø–æ–º–æ—â–∏ Matplotlib –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è —Ñ–∞–π–ª –∏ –¥–æ—Å—Ç–∞–µ—Ç –∏–∑ –Ω–µ–≥–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –¥–∞–ª–µ–µ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç.

```python
import matplotlib.pyplot as plt
import argparse

parser = argparse.ArgumentParser(description='Draw matplotlib plots')
parser.add_argument('filename')
args = parser.parse_args()
with open(args.filename, 'r') as f:
    lines = f.readlines()
    x = [float(line.split()[0]) for line in lines]
    y = [float(line.split()[1]) for line in lines]
plt.plot(x ,y, color="black")
plt.show()
```


# –°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã{.unnumbered}

::: {#refs}
:::
